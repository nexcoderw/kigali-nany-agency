{% extends 'layouts/app.html' %}
{% load humanize %}
{% block content %}

    <section class="box-section box-breadcrumb background-body">
        <div class="container">
            <ul class="breadcrumbs">
                <li>
                    <a href="{% url 'base:home' %}">
                        {% if request.session.lang == 'en' %} Home {% else %} Accueil {% endif %}
                    </a>
                    <span class="arrow-right">
                        <svg width="7" height="12" viewbox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M1 11L6 6L1 1" stroke="" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </span>
                </li>
                <li>
                    <a href="{% url 'base:getJobs' %}">
                        {% if request.session.lang == 'en' %} Jobs {% else %} Emplois {% endif %}
                    </a>
                    <span class="arrow-right">
                        <svg width="7" height="12" viewbox="0 0 7 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M1 11L6 6L1 1" stroke="" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </span>
                </li>
                <li>
                    <span class="text-breadcrumb">{{ job.title }}</span>
                </li>
            </ul>
        </div>
    </section>


    <section class="box-section box-content-tour-detail background-body pt-0">
        <div class="container">
            <div class="tour-header">
                <div class="tour-rate">
                    <div class="rate-element">
                        <span class="rating">
                            4.96 <span class="text-sm-medium neutral-500">(672 
                            {% if request.session.lang == 'en' %} reviews {% else %} avis {% endif %})</span>
                        </span>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-8">
                        <div class="tour-title-main">
                            <h4 class="neutral-1000">
                                {{ job.title }}
                            </h4>
                            <button class="btn btn-primary">
                                {{ job.salary|intcomma }}
                            
                                <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M8 15L15 8L8 1M15 8L1 8" stroke="" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="tour-metas">
                    <div class="tour-meta-left">
                        <p class="text-md-medium neutral-1000 mr-20 tour-location">
                            <svg class="invert" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M7.99967 0C4.80452 0 2.20508 2.59944 2.20508 5.79456C2.20508 9.75981 7.39067 15.581 7.61145 15.8269C7.81883 16.0579 8.18089 16.0575 8.38789 15.8269C8.60867 15.581 13.7943 9.75981 13.7943 5.79456C13.7942 2.59944 11.1948 0 7.99967 0ZM7.99967 8.70997C6.39211 8.70997 5.0843 7.40212 5.0843 5.79456C5.0843 4.187 6.39214 2.87919 7.99967 2.87919C9.6072 2.87919 10.915 4.18703 10.915 5.79459C10.915 7.40216 9.6072 8.70997 7.99967 8.70997Z" fill="#101010"/>
                            </svg>
                            {{ job.location }}
                        </p>
                    </div>
                    <div class="tour-meta-right">
                        <a class="btn btn-share" href="#">
                            <svg width="16" height="18" viewbox="0 0 16 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M13 11.5332C12.012 11.5332 11.1413 12.0193 10.5944 12.7584L5.86633 10.3374C5.94483 10.0698 6 9.79249 6 9.49989C6 9.10302 5.91863 8.72572 5.77807 8.37869L10.7262 5.40109C11.2769 6.04735 12.0863 6.46655 13 6.46655C14.6543 6.46655 16 5.12085 16 3.46655C16 1.81225 14.6543 0.466553 13 0.466553C11.3457 0.466553 10 1.81225 10 3.46655C10 3.84779 10.0785 4.20942 10.2087 4.54515L5.24583 7.53149C4.69563 6.90442 3.8979 6.49989 3 6.49989C1.3457 6.49989 0 7.84559 0 9.49989C0 11.1542 1.3457 12.4999 3 12.4999C4.00433 12.4999 4.8897 11.9996 5.4345 11.2397L10.147 13.6529C10.0602 13.9331 10 14.2249 10 14.5332C10 16.1875 11.3457 17.5332 13 17.5332C14.6543 17.5332 16 16.1875 16 14.5332C16 12.8789 14.6543 11.5332 13 11.5332Z" fill=""></path>
                            </svg>
                            {% if request.session.lang == 'en' %} Share {% else %} Partager {% endif %}
                        </a>
                        <a class="btn btn-wishlish" href="#">
                            <svg width="20" height="18" viewbox="0 0 20 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M2.2222 2.3638C4.34203 0.243977 7.65342 0.0419426 10.0004 1.7577C12.3473 0.0419426 15.6587 0.243977 17.7786 2.3638C20.1217 4.70695 20.1217 8.50594 17.7786 10.8491L12.1217 16.5059C10.9501 17.6775 9.05063 17.6775 7.87906 16.5059L2.2222 10.8491C-0.120943 8.50594 -0.120943 4.70695 2.2222 2.3638Z" fill=""></path>
                            </svg>
                            {% if request.session.lang == 'en' %} Wishlist {% else %} Liste de souhaits {% endif %}
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-lg-8">
                    <div class="box-feature-car">
                        <div class="list-feature-car align-items-start">
                            <div class="item-feature-car w-50">
                                <div class="item-feature-car-inner">
                                    <div class="feature-image">
                                        <img src="https://carento-demo.vercel.app/assets/imgs/page/car/km.svg" alt="Carento"/>
                                    </div>
                                    <div class="feature-info">
                                        <p class="text-md-medium neutral-1000">
                                            {% if request.session.lang == 'en' %} Category {% else %} Catégorie {% endif %}: 
                                            <strong>{{ job.get_category_display }}</strong>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="item-feature-car w-50">
                                <div class="item-feature-car-inner">
                                    <div class="feature-image">
                                        <img src="https://carento-demo.vercel.app/assets/imgs/page/car/auto.svg" alt="Carento"/>
                                    </div>
                                    <div class="feature-info">
                                        <p class="text-md-medium neutral-1000">
                                            {% if request.session.lang == 'en' %} Location {% else %} Emplacement {% endif %}: 
                                            <strong>{{ job.location }}</strong>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="item-feature-car w-50">
                                <div class="item-feature-car-inner">
                                    <div class="feature-image">
                                        <img src="https://carento-demo.vercel.app/assets/imgs/page/car/door.svg" alt="Carento"/>
                                    </div>
                                    <div class="feature-info">
                                        <p class="text-md-medium neutral-1000">
                                            {% if request.session.lang == 'en' %} Time {% else %} Durée {% endif %}: 
                                            <strong>{{ job.start_date|date }} - {{ job.end_date|date }}</strong>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="item-feature-car w-50">
                                <div class="item-feature-car-inner">
                                    <div class="feature-image">
                                        <img src="https://carento-demo.vercel.app/assets/imgs/page/car/diesel.svg" alt="Carento"/>
                                    </div>
                                    <div class="feature-info">
                                        <p class="text-md-medium neutral-1000">
                                            {% if request.session.lang == 'en' %} Status {% else %} Statut {% endif %}: 
                                            <strong>
                                                {% if job.status == 'open' %}
                                                    <span class="badge badge-success rounded-pill d-inline-flex align-items-center fs-10">
                                                        <i class="fi fi-rr-check-circle me-1"></i> 
                                                        {% if request.session.lang == 'en' %} Open {% else %} Ouvert {% endif %}
                                                    </span>
                                                {% elif job.status == 'closed' %}
                                                    <span class="badge badge-danger rounded-pill d-inline-flex align-items-center fs-10">
                                                        <i class="fi fi-rr-door-closed me-1"></i> 
                                                        {% if request.session.lang == 'en' %} Closed {% else %} Fermé {% endif %}
                                                    </span>
                                                {% elif job.status == 'pending' %}
                                                    <span class="badge badge-warning rounded-pill d-inline-flex align-items-center fs-10">
                                                        <i class="fi fi-rr-hourglass me-1"></i> 
                                                        {% if request.session.lang == 'en' %} Pending {% else %} En attente {% endif %}
                                                    </span>
                                                {% elif job.status == 'in_progress' %}
                                                    <span class="badge badge-info rounded-pill d-inline-flex align-items-center fs-10">
                                                        <i class="fi fi-rr-caret-right me-1"></i> 
                                                        {% if request.session.lang == 'en' %} In Progress {% else %} En cours {% endif %}
                                                    </span>
                                                {% endif %}
                                            </strong>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="box-collapse-expand">
                        <div class="group-collapse-expand">
                            <button class="btn btn-collapse" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOverview" aria-expanded="false" aria-controls="collapseOverview">
                                <h6>{% if request.session.lang == 'en' %} Description {% else %} Description {% endif %}</h6>
                                <svg width="12" height="7" viewbox="0 0 12 7" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M1 1L6 6L11 1" stroke="" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                </svg>
                            </button>
                            <div class="collapse show" id="collapseOverview">
                                <div class="card card-body">
                                    <p>{{ job.description }}</p>
                                </div>
                            </div>
                        </div>
                        <div class="group-collapse-expand">
                            <button class="btn btn-collapse" type="button" data-bs-toggle="collapse" data-bs-target="#collapseReviews" aria-expanded="false" aria-controls="collapseReviews">
                                <h6>{% if request.session.lang == 'en' %} Rate & Reviews {% else %} Avis et Évaluations {% endif %}</h6>
                                <svg width="12" height="7" viewbox="0 0 12 7" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M1 1L6 6L11 1" stroke="" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                </svg>
                            </button>
                            <div class="collapse show" id="collapseReviews">
                                <div class="card card-body">
                                    <div class="head-reviews">
                                        <div class="review-left">
                                            <div class="review-info-inner">
                                                <h6 class="neutral-1000">4.95 / 5</h6>
                                                <p class="text-sm-medium neutral-400">(672 
                                                    {% if request.session.lang == 'en' %} reviews {% else %} avis {% endif %}
                                                )</p>
                                                <div class="review-rate">
                                                    <img src="https://carento-demo.vercel.app/assets/imgs/page/tour-detail/star.svg" alt="Carento"/>
                                                    <img src="https://carento-demo.vercel.app/assets/imgs/page/tour-detail/star.svg" alt="Carento"/>
                                                    <img src="https://carento-demo.vercel.app/assets/imgs/page/tour-detail/star.svg" alt="Carento"/>
                                                    <img src="https://carento-demo.vercel.app/assets/imgs/page/tour-detail/star.svg" alt="Carento"/>
                                                    <img src="https://carento-demo.vercel.app/assets/imgs/page/tour-detail/star.svg" alt="Carento"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="review-progress">
                                        <div class="item-review-progress">
                                            <div class="text-rv-progress">
                                                <p class="text-sm-bold">
                                                    {% if request.session.lang == 'en' %} Price {% else %} Prix {% endif %}
                                                </p>
                                            </div>
                                            <div class="bar-rv-progress">
                                                <div class="progress">
                                                    <div class="progress-bar w-90"></div>
                                                </div>
                                            </div>
                                            <div class="text-avarage">
                                                <p>4.8/5</p>
                                            </div>
                                        </div>
                                        <div class="item-review-progress">
                                            <div class="text-rv-progress">
                                                <p class="text-sm-bold">
                                                    {% if request.session.lang == 'en' %} Service {% else %} Service {% endif %}
                                                </p>
                                            </div>
                                            <div class="bar-rv-progress">
                                                <div class="progress">
                                                    <div class="progress-bar w-90"></div>
                                                </div>
                                            </div>
                                            <div class="text-avarage">
                                                <p>4.2/5</p>
                                            </div>
                                        </div>
                                        <div class="item-review-progress">
                                            <div class="text-rv-progress">
                                                <p class="text-sm-bold">
                                                    {% if request.session.lang == 'en' %} Safety {% else %} Sécurité {% endif %}
                                                </p>
                                            </div>
                                            <div class="bar-rv-progress">
                                                <div class="progress">
                                                    <div class="progress-bar w-95"></div>
                                                </div>
                                            </div>
                                            <div class="text-avarage">
                                                <p>4.9/5</p>
                                            </div>
                                        </div>
                                        <div class="item-review-progress">
                                            <div class="text-rv-progress">
                                                <p class="text-sm-bold">
                                                    {% if request.session.lang == 'en' %} Entertainment {% else %} Divertissement {% endif %}
                                                </p>
                                            </div>
                                            <div class="bar-rv-progress">
                                                <div class="progress">
                                                    <div class="progress-bar w-85"></div>
                                                </div>
                                            </div>
                                            <div class="text-avarage">
                                                <p>4.7/5</p>
                                            </div>
                                        </div>
                                        <div class="item-review-progress">
                                            <div class="text-rv-progress">
                                                <p class="text-sm-bold">
                                                    {% if request.session.lang == 'en' %} Accessibility {% else %} Accessibilité {% endif %}
                                                </p>
                                            </div>
                                            <div class="bar-rv-progress">
                                                <div class="progress">
                                                    <div class="progress-bar w-100"></div>
                                                </div>
                                            </div>
                                            <div class="text-avarage">
                                                <p>5/5</p>
                                            </div>
                                        </div>
                                        <div class="item-review-progress">
                                            <div class="text-rv-progress">
                                                <p class="text-sm-bold">
                                                    {% if request.session.lang == 'en' %} Support {% else %} Assistance {% endif %}
                                                </p>
                                            </div>
                                            <div class="bar-rv-progress">
                                                <div class="progress">
                                                    <div class="progress-bar w-100"></div>
                                                </div>
                                            </div>
                                            <div class="text-avarage">
                                                <p>5/5</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>    
                    </div>

                </div>
                <div class="col-lg-4">
                    {% if user.role == 'Nanny' %}
                        {% if already_applied %}
                            <div class="alert alert-info">
                                {% if request.session.lang == 'en' %} You have already applied for this job. {% else %} Vous avez déjà postulé pour cet emploi. {% endif %}
                            </div>
                        {% else %}
                            <div class="booking-form">
                                <div class="head-booking-form">
                                    <p class="text-xl-bold neutral-1000">
                                        {% if request.session.lang == 'en' %} Apply Job {% else %} Postuler {% endif %}
                                    </p>
                                </div>
                                <div class="content-booking-form">
                                    <form method="POST">
                                        {% csrf_token %}
                                        <div class="item-line-booking">
                                            <div class="input-group">
                                                {{ form.experience }}
                                            </div>
                                        </div>
                                        <div class="item-line-booking">
                                            <strong>
                                                {% if request.session.lang == 'en' %} Availability {% else %} Disponibilité {% endif %}
                                            </strong>
                                            <div class="input-calendar">
                                                {{ form.availability }}
                                            </div>
                                        </div>
                                        <div class="item-line-booking">
                                            <div class="input-group">
                                                {{ form.cover_letter }}
                                            </div>
                                        </div>
                                        <div class="box-button-book">
                                            <button type="submit" class="btn btn-book">
                                                {% if request.session.lang == 'en' %} Apply Now {% else %} Postuler maintenant {% endif %}
                                                <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M8 15L15 8L8 1M15 8L1 8" stroke="" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                                </svg>
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        {% endif %}
                    {% else %}
                        <div class="alert alert-warning">
                            {% if request.session.lang == 'en' %} Become a nanny to apply for this job. {% else %} Devenez nounou pour postuler à cet emploi. {% endif %}
                        </div>
                    {% endif %}
                
                    {% if login_required %}
                        <div class="alert alert-warning">
                            {% if request.session.lang == 'en' %} Please <a href="{% url 'auth:login' %}">log in</a> to apply for this job. {% else %} Veuillez <a href="{% url 'auth:login' %}">vous connecter</a> pour postuler à cet emploi. {% endif %}
                        </div>
                    {% endif %}
                
                    <div class="sidebar-left border-1 background-card">
                        <h6 class="text-xl-bold neutral-1000">
                            {% if request.session.lang == 'en' %} Listed by {% else %} Listé par {% endif %}
                        </h6>
                        <div class="box-sidebar-content">
                            <div class="box-agent-support border-bottom pb-3 mb-3">
                                <div class="card-author">
                                    <div class="me-2">
                                        {% if job.client.image %}
                                            <img src="{{ job.client.image.url }}" alt="{{ job.title }}" style="width: 60px; border-radius: 50%;" />
                                        {% else %}
                                            <img src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png" style="width: 60px; border-radius: 50%;" alt="{{ job.title }}" />
                                        {% endif %}
                                    </div>
                                    <div class="card-author-info">
                                        <p class="text-lg-bold neutral-1000">{{ job.client.name }}</p>
                                        <p class="text-sm-medium neutral-500">{{ job.location }}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="box-info-contact">
                                <p class="text-md-medium mobile-phone neutral-1000">
                                    <span class="text-md-bold">
                                        {% if request.session.lang == 'en' %} Mobile: {% else %} Mobile : {% endif %}
                                    </span>
                                    {{ job.client.phone_number }}
                                </p>
                                <p class="text-md-medium email neutral-1000">
                                    <span class="text-md-bold">
                                        {% if request.session.lang == 'en' %} Email: {% else %} Email : {% endif %}
                                    </span>
                                    {{ job.client.email }}
                                </p>
                            </div>
                            <div class="box-link-bottom">
                                <a class="btn btn-primary py-3 w-100 rounded-3" href="#">
                                    {% if request.session.lang == 'en' %} All items by this dealer {% else %} Tous les articles de ce vendeur {% endif %}
                                    <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M8 15L15 8L8 1M15 8L1 8" stroke="" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                                    </svg>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

{% endblock content %}